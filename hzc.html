<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>烟雾报警器生产线 - 车间环境监控系统</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400;500;700&display=swap">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        :root {
            --primary-color: #d32f2f;
            --primary-dark: #b71c1c;
            --primary-light: #ff6659;
            --secondary-color: #2c3e50;
            --accent-color: #3498db;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --dark-bg: #1a1d2b;
            --card-bg: #252a3a;
            --text-light: #f5f7fa;
            --text-muted: #a0a8c3;
            --border-color: #3a4158;
            --temp-color: #e74c3c;
            --humidity-color: #3498db;
            --noise-color: #9b59b6;
            --vibration-color: #f39c12;
            --energy-color: #2ecc71;
            --process-step-1: #3498db;
            --process-step-2: #9b59b6;
            --process-step-3: #2ecc71;
            --process-step-4: #f39c12;
            --process-step-5: #e74c3c;
            --process-step-6: #1abc9c;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Roboto', sans-serif;
            background-color: var(--dark-bg);
            color: var(--text-light);
            line-height: 1.6;
            overflow-x: hidden;
        }
        
        .dashboard {
            display: grid;
            grid-template-columns: 250px 1fr;
            grid-template-rows: auto 1fr;
            min-height: 100vh;
        }
        
        /* 侧边栏样式 */
        .sidebar {
            grid-row: 1 / -1;
            background-color: var(--card-bg);
            border-right: 1px solid var(--border-color);
            padding: 1.5rem 0;
            display: flex;
            flex-direction: column;
            z-index: 100;
        }
        
        .logo {
            display: flex;
            align-items: center;
            padding: 0 1.5rem;
            margin-bottom: 2rem;
            cursor: pointer;
        }
        
        .logo-icon {
            background-color: var(--primary-color);
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 12px;
            font-size: 1.3rem;
            transition: transform 0.3s ease;
        }
        
        .logo:hover .logo-icon {
            transform: rotate(15deg);
        }
        
        .logo-text {
            font-family: 'Orbitron', sans-serif;
            font-weight: 700;
            font-size: 1.4rem;
            letter-spacing: 1px;
        }
        
        .logo-subtext {
            font-size: 0.8rem;
            color: var(--text-muted);
            display: block;
            margin-top: 2px;
        }
        
        .nav-menu {
            flex: 1;
        }
        
        .nav-item {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            color: var(--text-light);
            text-decoration: none;
            transition: all 0.3s ease;
            border-left: 3px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }
        
        .nav-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
            color: white;
        }
        
        .nav-item.active {
            background-color: rgba(211, 47, 47, 0.1);
            border-left-color: var(--primary-color);
            color: white;
        }
        
        .nav-item.active::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 5px;
            height: 100%;
            background-color: var(--primary-color);
        }
        
        .nav-item i {
            margin-right: 12px;
            width: 20px;
            text-align: center;
        }
        
        .nav-item span {
            position: relative;
            z-index: 1;
        }
        
        .status-indicator {
            display: flex;
            align-items: center;
            padding: 1rem 1.5rem;
            margin-top: auto;
            border-top: 1px solid var(--border-color);
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background-color: var(--success-color);
            margin-right: 10px;
            animation: pulse 2s infinite;
        }
        
        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }
        
        /* 顶部栏样式 */
        .topbar {
            grid-column: 2;
            background-color: var(--card-bg);
            border-bottom: 1px solid var(--border-color);
            padding: 1rem 2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: sticky;
            top: 0;
            z-index: 99;
        }
        
        .page-title h1 {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .page-title p {
            color: var(--text-muted);
            font-size: 0.9rem;
            margin-top: 5px;
        }
        
        .controls {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }
        
        .time-display {
            font-family: 'Orbitron', sans-serif;
            font-size: 1.2rem;
            color: var(--accent-color);
            letter-spacing: 1px;
        }
        
        .notification-btn {
            position: relative;
            background: none;
            border: none;
            color: var(--text-light);
            font-size: 1.3rem;
            cursor: pointer;
            transition: transform 0.2s;
        }
        
        .notification-btn:hover {
            transform: scale(1.1);
        }
        
        .notification-badge {
            position: absolute;
            top: -5px;
            right: -5px;
            background-color: var(--danger-color);
            color: white;
            border-radius: 50%;
            width: 18px;
            height: 18px;
            font-size: 0.7rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        /* 主内容区域 */
        .main-content {
            grid-column: 2;
            padding: 2rem;
            overflow-y: auto;
            background-color: var(--dark-bg);
        }
        
        .page {
            display: none;
        }
        
        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        /* 环境概览页面样式 */
        .env-overview {
            margin-bottom: 2rem;
        }
        
        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .section-header h2 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--text-light);
        }
        
        .section-actions {
            display: flex;
            gap: 1rem;
        }
        
        .btn {
            padding: 0.6rem 1.2rem;
            background-color: rgba(255, 255, 255, 0.1);
            color: var(--text-light);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
        }
        
        .btn:hover {
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .btn-primary {
            background-color: var(--primary-color);
        }
        
        .btn-primary:hover {
            background-color: var(--primary-dark);
        }
        
        /* 环境指标卡片 */
        .env-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .metric-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
            position: relative;
            overflow: hidden;
            cursor: pointer;
        }
        
        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }
        
        .metric-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        
        .metric-title {
            font-size: 1rem;
            font-weight: 500;
            color: var(--text-muted);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .metric-icon {
            width: 36px;
            height: 36px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }
        
        .temp-icon {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--temp-color);
        }
        
        .humidity-icon {
            background-color: rgba(52, 152, 219, 0.2);
            color: var(--humidity-color);
        }
        
        .noise-icon {
            background-color: rgba(155, 89, 182, 0.2);
            color: var(--noise-color);
        }
        
        .vibration-icon {
            background-color: rgba(243, 156, 18, 0.2);
            color: var(--vibration-color);
        }
        
        .energy-icon {
            background-color: rgba(46, 204, 113, 0.2);
            color: var(--energy-color);
        }
        
        .plc-icon {
            background-color: rgba(41, 128, 185, 0.2);
            color: #2980b9;
        }
        
        .speaker-icon {
            background-color: rgba(142, 68, 173, 0.2);
            color: #8e44ad;
        }
        
        .metric-value {
            font-size: 2.2rem;
            font-weight: 700;
            font-family: 'Orbitron', sans-serif;
            margin-bottom: 0.5rem;
        }
        
        .metric-unit {
            font-size: 1rem;
            color: var(--text-muted);
            margin-left: 4px;
        }
        
        .metric-status {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }
        
        .status-dot-small {
            width: 8px;
            height: 8px;
            border-radius: 50%;
        }
        
        .status-normal {
            background-color: var(--success-color);
            box-shadow: 0 0 8px var(--success-color);
        }
        
        .status-warning {
            background-color: var(--warning-color);
            box-shadow: 0 0 8px var(--warning-color);
            animation: blink 2s infinite;
        }
        
        .status-alarm {
            background-color: var(--danger-color);
            box-shadow: 0 0 8px var(--danger-color);
            animation: blink 1s infinite;
        }
        
        .metric-trend {
            display: flex;
            align-items: center;
            gap: 4px;
            font-size: 0.85rem;
            margin-top: 0.5rem;
        }
        
        .trend-up {
            color: var(--danger-color);
        }
        
        .trend-down {
            color: var(--success-color);
        }
        
        .trend-stable {
            color: var(--text-muted);
        }
        
        /* 产品加工过程模拟图 */
        .production-process {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            margin-bottom: 2rem;
        }
        
        .process-container {
            display: flex;
            flex-direction: column;
            margin-top: 1.5rem;
        }
        
        .process-steps {
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            margin-bottom: 2rem;
        }
        
        .process-steps::before {
            content: '';
            position: absolute;
            top: 40px;
            left: 50px;
            right: 50px;
            height: 3px;
            background-color: rgba(255, 255, 255, 0.1);
            z-index: 1;
        }
        
        .process-step {
            display: flex;
            flex-direction: column;
            align-items: center;
            z-index: 2;
            position: relative;
            cursor: pointer;
            transition: transform 0.3s ease;
        }
        
        .process-step:hover {
            transform: translateY(-5px);
        }
        
        .step-icon {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            margin-bottom: 10px;
            position: relative;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            transition: all 0.3s ease;
        }
        
        .step-icon.running {
            animation: pulse 1.5s infinite;
        }
        
        .step-1 .step-icon {
            background-color: var(--process-step-1);
            color: white;
        }
        
        .step-2 .step-icon {
            background-color: var(--process-step-2);
            color: white;
        }
        
        .step-3 .step-icon {
            background-color: var(--process-step-3);
            color: white;
        }
        
        .step-4 .step-icon {
            background-color: var(--process-step-4);
            color: white;
        }
        
        .step-5 .step-icon {
            background-color: var(--process-step-5);
            color: white;
        }
        
        .step-6 .step-icon {
            background-color: var(--process-step-6);
            color: white;
        }
        
        .step-name {
            font-size: 0.9rem;
            font-weight: 500;
            text-align: center;
            margin-bottom: 5px;
            color: var(--text-light);
        }
        
        .step-status {
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .step-status.running {
            color: var(--success-color);
        }
        
        .step-status.stopped {
            color: var(--danger-color);
        }
        
        .step-status.warning {
            color: var(--warning-color);
        }
        
        .process-conveyor {
            height: 60px;
            background-color: rgba(52, 73, 94, 0.5);
            border-radius: 8px;
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        
        .conveyor-belt {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: repeating-linear-gradient(
                90deg,
                transparent,
                transparent 20px,
                rgba(255, 255, 255, 0.1) 20px,
                rgba(255, 255, 255, 0.1) 40px
            );
            animation: moveBelt 10s linear infinite;
        }
        
        @keyframes moveBelt {
            0% { background-position: 0 0; }
            100% { background-position: 40px 0; }
        }
        
        .product-item {
            position: absolute;
            width: 40px;
            height: 40px;
            background-color: var(--primary-color);
            border-radius: 6px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.2rem;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.2);
            z-index: 2;
        }
        
        /* 设备监控区域 */
        .device-monitor {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        .device-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
            transition: transform 0.3s ease;
        }
        
        .device-card:hover {
            transform: translateY(-3px);
        }
        
        .device-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .device-title {
            font-size: 1.2rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .device-controls {
            display: flex;
            gap: 8px;
        }
        
        .device-control-btn {
            width: 32px;
            height: 32px;
            border-radius: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            border: none;
            color: var(--text-light);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: background-color 0.3s;
        }
        
        .device-control-btn:hover {
            background-color: rgba(255, 255, 255, 0.15);
        }
        
        .device-content {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        
        .device-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0.8rem 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.05);
        }
        
        .device-info:last-child {
            border-bottom: none;
        }
        
        .info-label {
            color: var(--text-muted);
            font-size: 0.9rem;
        }
        
        .info-value {
            font-weight: 500;
            font-family: 'Orbitron', sans-serif;
        }
        
        /* PLC三色灯样式 */
        .plc-light-container {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 15px;
            margin-top: 1rem;
        }
        
        .plc-light {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            position: relative;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.3);
        }
        
        .plc-light::after {
            content: '';
            position: absolute;
            top: 5px;
            left: 5px;
            right: 5px;
            bottom: 5px;
            border-radius: 50%;
            background-color: rgba(255, 255, 255, 0.1);
        }
        
        .plc-light.red {
            background-color: #d32f2f;
            box-shadow: 0 0 15px #d32f2f;
        }
        
        .plc-light.yellow {
            background-color: #f39c12;
            box-shadow: 0 0 15px #f39c12;
        }
        
        .plc-light.green {
            background-color: #27ae60;
            box-shadow: 0 0 15px #27ae60;
        }
        
        .plc-light.off {
            background-color: #666;
        }
        
        .plc-light-label {
            text-align: center;
            font-size: 0.8rem;
            margin-top: 5px;
            color: var(--text-muted);
        }
        
        /* 环境历史图表 */
        .env-charts {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(500px, 1fr));
            gap: 1.5rem;
            margin-bottom: 2rem;
        }
        
        @media (max-width: 768px) {
            .env-charts {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-card {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }
        
        .chart-container {
            height: 300px;
            position: relative;
            margin-top: 1rem;
        }
        
        /* 警报区域 */
        .alerts-container {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 1.5rem;
            border: 1px solid var(--border-color);
        }
        
        .alert-item {
            display: flex;
            align-items: center;
            padding: 1rem;
            border-bottom: 1px solid var(--border-color);
            transition: background-color 0.3s ease;
        }
        
        .alert-item:hover {
            background-color: rgba(255, 255, 255, 0.05);
        }
        
        .alert-item:last-child {
            border-bottom: none;
        }
        
        .alert-icon {
            width: 40px;
            height: 40px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 1rem;
            font-size: 1.2rem;
        }
        
        .alert-icon.critical {
            background-color: rgba(231, 76, 60, 0.2);
            color: var(--danger-color);
        }
        
        .alert-icon.warning {
            background-color: rgba(243, 156, 18, 0.2);
            color: var(--warning-color);
        }
        
        .alert-icon.info {
            background-color: rgba(52, 152, 219, 0.2);
            color: var(--accent-color);
        }
        
        .alert-content h4 {
            font-size: 1rem;
            margin-bottom: 4px;
        }
        
        .alert-content p {
            font-size: 0.85rem;
            color: var(--text-muted);
        }
        
        .alert-time {
            margin-left: auto;
            font-size: 0.8rem;
            color: var(--text-muted);
        }
        
        /* 其他页面样式 */
        .page-placeholder {
            background-color: var(--card-bg);
            border-radius: 12px;
            padding: 3rem;
            border: 1px solid var(--border-color);
            text-align: center;
            margin-top: 2rem;
        }
        
        .page-placeholder i {
            font-size: 4rem;
            color: var(--accent-color);
            margin-bottom: 1.5rem;
        }
        
        .page-placeholder h2 {
            font-size: 2rem;
            margin-bottom: 1rem;
            color: var(--text-light);
        }
        
        .page-placeholder p {
            color: var(--text-muted);
            max-width: 600px;
            margin: 0 auto 2rem;
        }
        
        /* 响应式设计 */
        @media (max-width: 1024px) {
            .dashboard {
                grid-template-columns: 1fr;
                grid-template-rows: auto auto 1fr;
            }
            
            .sidebar {
                grid-row: 1;
                grid-column: 1;
                flex-direction: row;
                padding: 1rem;
                overflow-x: auto;
            }
            
            .logo {
                margin-bottom: 0;
                margin-right: 1.5rem;
                flex-shrink: 0;
            }
            
            .nav-menu {
                display: flex;
                flex: 1;
                overflow-x: auto;
            }
            
            .nav-item {
                border-left: none;
                border-bottom: 3px solid transparent;
                padding: 0.5rem 1rem;
                flex-shrink: 0;
            }
            
            .nav-item.active {
                border-left-color: transparent;
                border-bottom-color: var(--primary-color);
            }
            
            .nav-item.active::before {
                display: none;
            }
            
            .status-indicator {
                display: none;
            }
            
            .topbar {
                grid-column: 1;
            }
            
            .main-content {
                grid-column: 1;
            }
            
            .process-steps {
                flex-wrap: wrap;
                justify-content: center;
                gap: 20px;
            }
            
            .process-steps::before {
                display: none;
            }
        }
        
        @media (max-width: 768px) {
            .env-metrics {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .device-monitor {
                grid-template-columns: 1fr;
            }
        }
        
        @media (max-width: 576px) {
            .env-metrics {
                grid-template-columns: 1fr;
            }
            
            .controls {
                flex-direction: column;
                align-items: flex-start;
                gap: 0.5rem;
            }
            
            .topbar {
                padding: 1rem;
            }
            
            .page-title h1 {
                font-size: 1.5rem;
            }
            
            .step-icon {
                width: 60px;
                height: 60px;
                font-size: 1.5rem;
            }
            
            .step-name {
                font-size: 0.8rem;
            }
        }
        
        /* 自定义滚动条 */
        ::-webkit-scrollbar {
            width: 8px;
            height: 8px;
        }
        
        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb {
            background: var(--primary-color);
            border-radius: 4px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: var(--primary-dark);
        }
        
        /* 动画效果 */
        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        /* 设备详情模态框 */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.7);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }
        
        .modal.active {
            display: flex;
            animation: fadeIn 0.3s ease;
        }
        
        .modal-content {
            background-color: var(--card-bg);
            border-radius: 12px;
            width: 90%;
            max-width: 500px;
            padding: 2rem;
            border: 1px solid var(--border-color);
            position: relative;
        }
        
        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1.5rem;
        }
        
        .modal-header h3 {
            font-size: 1.5rem;
            color: var(--text-light);
        }
        
        .close-modal {
            background: none;
            border: none;
            color: var(--text-muted);
            font-size: 1.5rem;
            cursor: pointer;
            transition: color 0.3s;
        }
        
        .close-modal:hover {
            color: var(--text-light);
        }
        
        .modal-body p {
            margin-bottom: 1rem;
            color: var(--text-muted);
        }
        
        .modal-footer {
            margin-top: 1.5rem;
            display: flex;
            justify-content: flex-end;
        }
    </style>
</head>
<body>
    <div class="dashboard">
        <!-- 侧边栏 -->
        <aside class="sidebar">
            <div class="logo" id="goToDashboard">
                <div class="logo-icon">
                    <i class="fas fa-industry"></i>
                </div>
                <div class="logo-text">
                    车间环境<span class="logo-subtext">监控系统</span>
                </div>
            </div>
            
            <nav class="nav-menu">
                <div class="nav-item active" data-page="overview">
                    <i class="fas fa-tachometer-alt"></i>
                    <span>环境概览</span>
                </div>
                <div class="nav-item" data-page="temp-humidity">
                    <i class="fas fa-thermometer-half"></i>
                    <span>温湿度监控</span>
                </div>
                <div class="nav-item" data-page="noise-vibration">
                    <i class="fas fa-volume-up"></i>
                    <span>噪声与震动</span>
                </div>
                <div class="nav-item" data-page="energy">
                    <i class="fas fa-bolt"></i>
                    <span>电能监控</span>
                </div>
                <div class="nav-item" data-page="plc-devices">
                    <i class="fas fa-lightbulb"></i>
                    <span>PLC与设备</span>
                </div>
                <div class="nav-item" data-page="alerts">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>环境警报</span>
                </div>
                <div class="nav-item" data-page="reports">
                    <i class="fas fa-chart-bar"></i>
                    <span>环境报告</span>
                </div>
            </nav>
            
            <div class="status-indicator">
                <div class="status-dot"></div>
                <span>环境正常</span>
            </div>
        </aside>
        
        <!-- 顶部栏 -->
        <header class="topbar">
            <div class="page-title">
                <h1 id="page-title">车间环境监控系统</h1>
                <p id="page-subtitle">烟雾报警器生产线 • 实时环境监控 • 智能预警</p>
            </div>
            
            <div class="controls">
                <div class="time-display" id="current-time">00:00:00</div>
                <button class="notification-btn" id="notificationBtn">
                    <i class="fas fa-bell"></i>
                    <span class="notification-badge" id="alertCount">3</span>
                </button>
                <div class="user-profile">
                    <i class="fas fa-user-circle" style="font-size: 1.8rem; cursor: pointer;" id="userProfileBtn"></i>
                </div>
            </div>
        </header>
        
        <!-- 主内容区域 -->
        <main class="main-content">
            <!-- 环境概览页面 -->
            <div class="page active" id="overview">
                <div class="env-overview">
                    <div class="section-header">
                        <h2>环境指标概览</h2>
                        <div class="section-actions">
                            <button class="btn" id="refreshData">
                                <i class="fas fa-sync-alt"></i>
                                <span>刷新数据</span>
                            </button>
                            <button class="btn btn-primary" id="exportReport">
                                <i class="fas fa-download"></i>
                                <span>导出报告</span>
                            </button>
                        </div>
                    </div>
                    
                    <!-- 环境指标卡片 -->
                    <div class="env-metrics">
                        <!-- 温度 -->
                        <div class="metric-card" data-metric="temperature">
                            <div class="metric-header">
                                <div class="metric-title">
                                    <div class="metric-icon temp-icon">
                                        <i class="fas fa-thermometer-half"></i>
                                    </div>
                                    <span>温度</span>
                                </div>
                                <div class="metric-status">
                                    <div class="status-dot-small status-normal"></div>
                                    <span>正常</span>
                                </div>
                            </div>
                            <div class="metric-value">23.5<span class="metric-unit">°C</span></div>
                            <div class="metric-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>较1小时前 +0.3°C</span>
                            </div>
                        </div>
                        
                        <!-- 湿度 -->
                        <div class="metric-card" data-metric="humidity">
                            <div class="metric-header">
                                <div class="metric-title">
                                    <div class="metric-icon humidity-icon">
                                        <i class="fas fa-tint"></i>
                                    </div>
                                    <span>湿度</span>
                                </div>
                                <div class="metric-status">
                                    <div class="status-dot-small status-normal"></div>
                                    <span>正常</span>
                                </div>
                            </div>
                            <div class="metric-value">45.2<span class="metric-unit">%RH</span></div>
                            <div class="metric-trend trend-stable">
                                <i class="fas fa-minus"></i>
                                <span>较1小时前 持平</span>
                            </div>
                        </div>
                        
                        <!-- 噪声 -->
                        <div class="metric-card" data-metric="noise">
                            <div class="metric-header">
                                <div class="metric-title">
                                    <div class="metric-icon noise-icon">
                                        <i class="fas fa-volume-up"></i>
                                    </div>
                                    <span>噪声</span>
                                </div>
                                <div class="metric-status">
                                    <div class="status-dot-small status-warning"></div>
                                    <span>偏高</span>
                                </div>
                            </div>
                            <div class="metric-value">68.3<span class="metric-unit">dB</span></div>
                            <div class="metric-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>较1小时前 +2.1dB</span>
                            </div>
                        </div>
                        
                        <!-- 震动 -->
                        <div class="metric-card" data-metric="vibration">
                            <div class="metric-header">
                                <div class="metric-title">
                                    <div class="metric-icon vibration-icon">
                                        <i class="fas fa-wave-square"></i>
                                    </div>
                                    <span>震动</span>
                                </div>
                                <div class="metric-status">
                                    <div class="status-dot-small status-normal"></div>
                                    <span>正常</span>
                                </div>
                            </div>
                            <div class="metric-value">0.12<span class="metric-unit">mm/s</span></div>
                            <div class="metric-trend trend-down">
                                <i class="fas fa-arrow-down"></i>
                                <span>较1小时前 -0.03mm/s</span>
                            </div>
                        </div>
                        
                        <!-- 电能 -->
                        <div class="metric-card" data-metric="energy">
                            <div class="metric-header">
                                <div class="metric-title">
                                    <div class="metric-icon energy-icon">
                                        <i class="fas fa-bolt"></i>
                                    </div>
                                    <span>电能消耗</span>
                                </div>
                                <div class="metric-status">
                                    <div class="status-dot-small status-normal"></div>
                                    <span>正常</span>
                                </div>
                            </div>
                            <div class="metric-value">125.8<span class="metric-unit">kW</span></div>
                            <div class="metric-trend trend-up">
                                <i class="fas fa-arrow-up"></i>
                                <span>较1小时前 +3.2kW</span>
                            </div>
                        </div>
                        
                        <!-- PLC状态 -->
                        <div class="metric-card" data-metric="plc">
                            <div class="metric-header">
                                <div class="metric-title">
                                    <div class="metric-icon plc-icon">
                                        <i class="fas fa-lightbulb"></i>
                                    </div>
                                    <span>PLC状态</span>
                                </div>
                                <div class="metric-status">
                                    <div class="status-dot-small status-normal"></div>
                                    <span>运行中</span>
                                </div>
                            </div>
                            <div class="plc-light-container">
                                <div>
                                    <div class="plc-light red off"></div>
                                    <div class="plc-light-label">停止</div>
                                </div>
                                <div>
                                    <div class="plc-light yellow off"></div>
                                    <div class="plc-light-label">警告</div>
                                </div>
                                <div>
                                    <div class="plc-light green"></div>
                                    <div class="plc-light-label">运行</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 产品加工过程模拟图 -->
                    <div class="production-process">
                        <div class="section-header">
                            <h2>烟雾报警器生产流程</h2>
                            <div class="section-actions">
                                <select id="processSpeed" style="background-color: var(--dark-bg); color: var(--text-light); padding: 5px 10px; border-radius: 6px; border: 1px solid var(--border-color);">
                                    <option value="normal">正常速度</option>
                                    <option value="fast">快速</option>
                                    <option value="slow">慢速</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="process-container">
                            <div class="process-steps" id="processSteps">
                                <!-- 步骤1：原材料准备 -->
                                <div class="process-step step-1" data-step="1">
                                    <div class="step-icon running">
                                        <i class="fas fa-box-open"></i>
                                    </div>
                                    <div class="step-name">原材料准备</div>
                                    <div class="step-status running">
                                        <i class="fas fa-play-circle"></i>
                                        <span>运行中</span>
                                    </div>
                                </div>
                                
                                <!-- 步骤2：电路板组装 -->
                                <div class="process-step step-2" data-step="2">
                                    <div class="step-icon running">
                                        <i class="fas fa-microchip"></i>
                                    </div>
                                    <div class="step-name">电路板组装</div>
                                    <div class="step-status running">
                                        <i class="fas fa-play-circle"></i>
                                        <span>运行中</span>
                                    </div>
                                </div>
                                
                                <!-- 步骤3：传感器安装 -->
                                <div class="process-step step-3" data-step="3">
                                    <div class="step-icon running">
                                        <i class="fas fa-burn"></i>
                                    </div>
                                    <div class="step-name">传感器安装</div>
                                    <div class="step-status running">
                                        <i class="fas fa-play-circle"></i>
                                        <span>运行中</span>
                                    </div>
                                </div>
                                
                                <!-- 步骤4：外壳装配 -->
                                <div class="process-step step-4" data-step="4">
                                    <div class="step-icon running">
                                        <i class="fas fa-cube"></i>
                                    </div>
                                    <div class="step-name">外壳装配</div>
                                    <div class="step-status running">
                                        <i class="fas fa-play-circle"></i>
                                        <span>运行中</span>
                                    </div>
                                </div>
                                
                                <!-- 步骤5：功能测试 -->
                                <div class="process-step step-5" data-step="5">
                                    <div class="step-icon running">
                                        <i class="fas fa-vial"></i>
                                    </div>
                                    <div class="step-name">功能测试</div>
                                    <div class="step-status running">
                                        <i class="fas fa-play-circle"></i>
                                        <span>运行中</span>
                                    </div>
                                </div>
                                
                                <!-- 步骤6：包装入库 -->
                                <div class="process-step step-6" data-step="6">
                                    <div class="step-icon running">
                                        <i class="fas fa-box"></i>
                                    </div>
                                    <div class="step-name">包装入库</div>
                                    <div class="step-status running">
                                        <i class="fas fa-play-circle"></i>
                                        <span>运行中</span>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="process-conveyor">
                                <div class="conveyor-belt"></div>
                                <!-- 产品将在传送带上动态生成 -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- 设备监控 -->
                    <div class="section-header" style="margin-top: 2rem;">
                        <h2>环境设备监控</h2>
                    </div>
                    
                    <div class="device-monitor">
                        <!-- 温湿度传感器 -->
                        <div class="device-card">
                            <div class="device-header">
                                <div class="device-title">
                                    <i class="fas fa-thermometer-half" style="color: var(--temp-color);"></i>
                                    <span>温湿度传感器 #1</span>
                                </div>
                                <div class="device-controls">
                                    <button class="device-control-btn" title="校准">
                                        <i class="fas fa-wrench"></i>
                                    </button>
                                    <button class="device-control-btn" title="历史数据">
                                        <i class="fas fa-history"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="device-content">
                                <div class="device-info">
                                    <span class="info-label">设备ID:</span>
                                    <span class="info-value">TH-SENSOR-001</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">位置:</span>
                                    <span class="info-value">装配区A</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">温度:</span>
                                    <span class="info-value">23.5°C</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">湿度:</span>
                                    <span class="info-value">45.2%RH</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">状态:</span>
                                    <span class="info-value" style="color: var(--success-color);">正常</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 噪声监测仪 -->
                        <div class="device-card">
                            <div class="device-header">
                                <div class="device-title">
                                    <i class="fas fa-volume-up" style="color: var(--noise-color);"></i>
                                    <span>噪声监测仪 #1</span>
                                </div>
                                <div class="device-controls">
                                    <button class="device-control-btn" title="校准">
                                        <i class="fas fa-wrench"></i>
                                    </button>
                                    <button class="device-control-btn" title="历史数据">
                                        <i class="fas fa-history"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="device-content">
                                <div class="device-info">
                                    <span class="info-label">设备ID:</span>
                                    <span class="info-value">NOISE-MON-001</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">位置:</span>
                                    <span class="info-value">测试区</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">当前噪声:</span>
                                    <span class="info-value">68.3 dB</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">峰值噪声:</span>
                                    <span class="info-value">72.1 dB</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">状态:</span>
                                    <span class="info-value" style="color: var(--warning-color);">偏高</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 震动传感器 -->
                        <div class="device-card">
                            <div class="device-header">
                                <div class="device-title">
                                    <i class="fas fa-wave-square" style="color: var(--vibration-color);"></i>
                                    <span>震动传感器 #1</span>
                                </div>
                                <div class="device-controls">
                                    <button class="device-control-btn" title="校准">
                                        <i class="fas fa-wrench"></i>
                                    </button>
                                    <button class="device-control-btn" title="历史数据">
                                        <i class="fas fa-history"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="device-content">
                                <div class="device-info">
                                    <span class="info-label">设备ID:</span>
                                    <span class="info-value">VIB-SENSOR-001</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">位置:</span>
                                    <span class="info-value">冲压机旁</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">当前震动:</span>
                                    <span class="info-value">0.12 mm/s</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">最大震动:</span>
                                    <span class="info-value">0.25 mm/s</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">状态:</span>
                                    <span class="info-value" style="color: var(--success-color);">正常</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 电能表 -->
                        <div class="device-card">
                            <div class="device-header">
                                <div class="device-title">
                                    <i class="fas fa-bolt" style="color: var(--energy-color);"></i>
                                    <span>智能电能表 #1</span>
                                </div>
                                <div class="device-controls">
                                    <button class="device-control-btn" title="数据重置">
                                        <i class="fas fa-redo"></i>
                                    </button>
                                    <button class="device-control-btn" title="历史数据">
                                        <i class="fas fa-history"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="device-content">
                                <div class="device-info">
                                    <span class="info-label">设备ID:</span>
                                    <span class="info-value">ENERGY-METER-001</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">位置:</span>
                                    <span class="info-value">主配电室</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">当前功率:</span>
                                    <span class="info-value">125.8 kW</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">今日用电:</span>
                                    <span class="info-value">1,245.3 kWh</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">状态:</span>
                                    <span class="info-value" style="color: var(--success-color);">正常</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- 扬声器系统 -->
                        <div class="device-card">
                            <div class="device-header">
                                <div class="device-title">
                                    <i class="fas fa-bullhorn" style="color: #8e44ad;"></i>
                                    <span>广播系统 #1</span>
                                </div>
                                <div class="device-controls">
                                    <button class="device-control-btn" title="测试">
                                        <i class="fas fa-play"></i>
                                    </button>
                                    <button class="device-control-btn" title="设置">
                                        <i class="fas fa-cog"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="device-content">
                                <div class="device-info">
                                    <span class="info-label">设备ID:</span>
                                    <span class="info-value">SPEAKER-SYS-001</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">位置:</span>
                                    <span class="info-value">车间中央</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">音量:</span>
                                    <span class="info-value">75%</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">状态:</span>
                                    <span class="info-value" style="color: var(--success-color);">待机</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">最后广播:</span>
                                    <span class="info-value">09:30:22</span>
                                </div>
                            </div>
                        </div>
                        
                        <!-- PLC控制器 -->
                        <div class="device-card">
                            <div class="device-header">
                                <div class="device-title">
                                    <i class="fas fa-cogs" style="color: #2980b9;"></i>
                                    <span>PLC控制器 #1</span>
                                </div>
                                <div class="device-controls">
                                    <button class="device-control-btn" title="重启">
                                        <i class="fas fa-power-off"></i>
                                    </button>
                                    <button class="device-control-btn" title="日志">
                                        <i class="fas fa-file-alt"></i>
                                    </button>
                                </div>
                            </div>
                            <div class="device-content">
                                <div class="device-info">
                                    <span class="info-label">设备ID:</span>
                                    <span class="info-value">PLC-CONT-001</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">位置:</span>
                                    <span class="info-value">控制室</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">运行时间:</span>
                                    <span class="info-value">248 小时</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">CPU负载:</span>
                                    <span class="info-value">42%</span>
                                </div>
                                <div class="device-info">
                                    <span class="info-label">状态:</span>
                                    <span class="info-value" style="color: var(--success-color);">运行中</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 环境历史图表 -->
                    <div class="section-header" style="margin-top: 2rem;">
                        <h2>环境趋势分析</h2>
                        <div class="section-actions">
                            <select id="chartTimeRange" style="background-color: var(--dark-bg); color: var(--text-light); padding: 5px 10px; border-radius: 6px; border: 1px solid var(--border-color);">
                                <option value="24h">24小时</option>
                                <option value="7d">7天</option>
                                <option value="30d">30天</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="env-charts">
                        <div class="chart-card">
                            <h3>温度变化趋势</h3>
                            <div class="chart-container">
                                <canvas id="tempChart"></canvas>
                            </div>
                        </div>
                        
                        <div class="chart-card">
                            <h3>噪声水平趋势</h3>
                            <div class="chart-container">
                                <canvas id="noiseChart"></canvas>
                            </div>
                        </div>
                    </div>
                    
                    <!-- 环境警报 -->
                    <div class="section-header" style="margin-top: 2rem;">
                        <h2>环境警报</h2>
                        <button class="btn" id="clearAlerts">
                            <i class="fas fa-trash-alt"></i>
                            <span>清除已读</span>
                        </button>
                    </div>
                    
                    <div class="alerts-container">
                        <div class="alerts-list" id="alertsList">
                            <div class="alert-item">
                                <div class="alert-icon warning">
                                    <i class="fas fa-exclamation-triangle"></i>
                                </div>
                                <div class="alert-content">
                                    <h4>噪声水平偏高</h4>
                                    <p>测试区噪声水平达到68.3dB，超过设定阈值65dB</p>
                                </div>
                                <div class="alert-time">15分钟前</div>
                            </div>
                            
                            <div class="alert-item">
                                <div class="alert-icon info">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="alert-content">
                                    <h4>温度缓慢上升</h4>
                                    <p>装配区A温度在过去1小时内上升0.8°C</p>
                                </div>
                                <div class="alert-time">1小时前</div>
                            </div>
                            
                            <div class="alert-item">
                                <div class="alert-icon info">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="alert-content">
                                    <h4>电能消耗高峰</h4>
                                    <p>当前电能消耗达到峰值，建议检查设备运行状态</p>
                                </div>
                                <div class="alert-time">2小时前</div>
                            </div>
                            
                            <div class="alert-item">
                                <div class="alert-icon info">
                                    <i class="fas fa-info-circle"></i>
                                </div>
                                <div class="alert-content">
                                    <h4>设备例行检查提醒</h4>
                                    <p>温湿度传感器#1计划维护时间：明天上午10:00</p>
                                </div>
                                <div class="alert-time">3小时前</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 温湿度监控页面 -->
            <div class="page" id="temp-humidity">
                <div class="page-placeholder">
                    <i class="fas fa-thermometer-half"></i>
                    <h2>温湿度监控</h2>
                    <p>实时监控车间各区域的温度和湿度变化，提供温湿度分布图、历史趋势分析和预警功能。</p>
                    <div style="background-color: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: left;">
                        <h3 style="margin-bottom: 1rem;">主要功能：</h3>
                        <ul style="list-style-type: none; color: var(--text-muted);">
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 多点温湿度实时监测</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 温湿度分布热力图</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 温湿度变化趋势分析</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 异常温度/湿度预警</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 噪声与震动页面 -->
            <div class="page" id="noise-vibration">
                <div class="page-placeholder">
                    <i class="fas fa-volume-up"></i>
                    <h2>噪声与震动监控</h2>
                    <p>监测车间噪声水平和设备震动情况，确保工作环境符合安全标准，预防设备故障。</p>
                    <div style="background-color: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: left;">
                        <h3 style="margin-bottom: 1rem;">主要功能：</h3>
                        <ul style="list-style-type: none; color: var(--text-muted);">
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 实时噪声水平监测</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 设备震动频率分析</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 噪声/震动超标预警</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 历史数据查询与导出</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 电能监控页面 -->
            <div class="page" id="energy">
                <div class="page-placeholder">
                    <i class="fas fa-bolt"></i>
                    <h2>电能监控</h2>
                    <p>实时监控车间电能消耗，分析用电趋势，优化能源使用，降低生产成本。</p>
                    <div style="background-color: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: left;">
                        <h3 style="margin-bottom: 1rem;">主要功能：</h3>
                        <ul style="list-style-type: none; color: var(--text-muted);">
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 实时电能消耗监测</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 用电趋势分析</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 电能消耗预警</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 节能建议与优化</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- PLC与设备页面 -->
            <div class="page" id="plc-devices">
                <div class="page-placeholder">
                    <i class="fas fa-lightbulb"></i>
                    <h2>PLC与设备监控</h2>
                    <p>监控PLC控制器状态、三色灯指示、扬声器系统等设备运行情况。</p>
                    <div style="background-color: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: left;">
                        <h3 style="margin-bottom: 1rem;">主要功能：</h3>
                        <ul style="list-style-type: none; color: var(--text-muted);">
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> PLC控制器状态监控</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 三色灯状态指示</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 扬声器系统控制</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 设备故障诊断</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 环境警报页面 -->
            <div class="page" id="alerts">
                <div class="page-placeholder">
                    <i class="fas fa-exclamation-triangle"></i>
                    <h2>环境警报中心</h2>
                    <p>集中管理所有环境异常警报，包括温湿度异常、噪声超标、设备故障等。</p>
                    <div style="background-color: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: left;">
                        <h3 style="margin-bottom: 1rem;">主要功能：</h3>
                        <ul style="list-style-type: none; color: var(--text-muted);">
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 实时警报监控</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 警报分类与优先级</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 警报处理跟踪</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 历史警报查询</li>
                        </ul>
                    </div>
                </div>
            </div>
            
            <!-- 环境报告页面 -->
            <div class="page" id="reports">
                <div class="page-placeholder">
                    <i class="fas fa-chart-bar"></i>
                    <h2>环境报告</h2>
                    <p>生成环境监控报告，包括日报、周报、月报，提供数据分析和趋势预测。</p>
                    <div style="background-color: rgba(0,0,0,0.2); padding: 1.5rem; border-radius: 8px; margin-top: 2rem; text-align: left;">
                        <h3 style="margin-bottom: 1rem;">主要功能：</h3>
                        <ul style="list-style-type: none; color: var(--text-muted);">
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 环境数据统计分析</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 自定义报告生成</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 趋势预测分析</li>
                            <li style="margin-bottom: 0.5rem;"><i class="fas fa-check" style="color: var(--success-color); margin-right: 10px;"></i> 报告导出与分享</li>
                        </ul>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- 设备详情模态框 -->
    <div class="modal" id="equipmentModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="modalEquipmentName">设备详情</h3>
                <button class="close-modal" id="closeModal">&times;</button>
            </div>
            <div class="modal-body">
                <p id="modalEquipmentDescription">设备详细信息将在这里显示。</p>
                <p><strong>设备ID:</strong> <span id="modalEquipmentId">TH-SENSOR-001</span></p>
                <p><strong>位置:</strong> <span id="modalEquipmentLocation">装配区A</span></p>
                <p><strong>状态:</strong> <span id="modalEquipmentStatus">运行中</span></p>
                <p><strong>安装日期:</strong> <span id="modalEquipmentInstallDate">2023-08-15</span></p>
                <p><strong>最后维护:</strong> <span id="modalEquipmentLastMaintenance">2023-11-10</span></p>
            </div>
            <div class="modal-footer">
                <button class="btn" style="background-color: var(--accent-color);" id="viewHistoryBtn">查看历史数据</button>
            </div>
        </div>
    </div>

    <script>
        // 页面切换功能
        document.addEventListener('DOMContentLoaded', function() {
            // 导航点击事件
            const navItems = document.querySelectorAll('.nav-item');
            const pages = document.querySelectorAll('.page');
            const pageTitle = document.getElementById('page-title');
            const pageSubtitle = document.getElementById('page-subtitle');
            
            // 页面标题映射
            const pageTitles = {
                'overview': { title: '车间环境监控系统', subtitle: '烟雾报警器生产线 • 实时环境监控 • 智能预警' },
                'temp-humidity': { title: '温湿度监控', subtitle: '实时监测车间温度与湿度变化' },
                'noise-vibration': { title: '噪声与震动监控', subtitle: '监测噪声水平和设备震动情况' },
                'energy': { title: '电能监控', subtitle: '实时监控车间电能消耗与节能分析' },
                'plc-devices': { title: 'PLC与设备监控', subtitle: '监控PLC控制器、三色灯、扬声器等设备' },
                'alerts': { title: '环境警报中心', subtitle: '集中管理环境异常警报' },
                'reports': { title: '环境报告', subtitle: '生成环境监控数据报告与分析' }
            };
            
            // 导航点击事件处理
            navItems.forEach(item => {
                item.addEventListener('click', function() {
                    const targetPage = this.getAttribute('data-page');
                    
                    // 更新导航状态
                    navItems.forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                    
                    // 更新页面内容
                    pages.forEach(page => page.classList.remove('active'));
                    document.getElementById(targetPage).classList.add('active');
                    
                    // 更新页面标题
                    if (pageTitles[targetPage]) {
                        pageTitle.textContent = pageTitles[targetPage].title;
                        pageSubtitle.textContent = pageTitles[targetPage].subtitle;
                    }
                });
            });
            
            // 点击logo返回环境概览
            document.getElementById('goToDashboard').addEventListener('click', function() {
                navItems.forEach(nav => nav.classList.remove('active'));
                document.querySelector('.nav-item[data-page="overview"]').classList.add('active');
                
                pages.forEach(page => page.classList.remove('active'));
                document.getElementById('overview').classList.add('active');
                
                pageTitle.textContent = pageTitles['overview'].title;
                pageSubtitle.textContent = pageTitles['overview'].subtitle;
            });
            
            // 初始化环境监控功能
            initEnvironmentMonitoring();
        });
        
        // 环境监控功能初始化
        function initEnvironmentMonitoring() {
            // 更新时间显示
            function updateTime() {
                const now = new Date();
                const timeString = now.toLocaleTimeString('zh-CN', {hour12: false});
                document.getElementById('current-time').textContent = timeString;
            }
            
            // 初始化时间
            updateTime();
            setInterval(updateTime, 1000);
            
            // 初始化生产流程模拟
            initProductionProcess();
            
            // 初始化温度图表
            initTempChart();
            
            // 初始化噪声图表
            initNoiseChart();
            
            // 模拟实时数据更新
            setInterval(updateEnvironmentData, 5000);
            
            // 设备点击事件
            setupDeviceEvents();
            
            // 按钮事件
            setupButtonEvents();
        }
        
        // 初始化生产流程模拟
        function initProductionProcess() {
            const conveyor = document.querySelector('.process-conveyor');
            const processSteps = document.querySelectorAll('.process-step');
            
            // 创建产品在传送带上的动画
            function createProductAnimation() {
                const productCount = 3; // 同时显示3个产品
                
                for (let i = 0; i < productCount; i++) {
                    const product = document.createElement('div');
                    product.className = 'product-item';
                    product.innerHTML = '<i class="fas fa-fire-extinguisher"></i>';
                    product.style.left = `${-40 + (i * 150)}px`; // 初始位置
                    product.style.top = '10px';
                    
                    conveyor.appendChild(product);
                    
                    // 动画移动产品
                    animateProduct(product, i * 2); // 延迟启动
                }
            }
            
            // 动画产品移动
            function animateProduct(product, delay) {
                setTimeout(() => {
                    let position = -40;
                    const conveyorWidth = conveyor.offsetWidth;
                    
                    const moveInterval = setInterval(() => {
                        position += 1;
                        
                        if (position > conveyorWidth) {
                            position = -40; // 重置到起点
                        }
                        
                        product.style.left = `${position}px`;
                    }, 50); // 移动速度
                    
                    // 保存interval ID以便清理
                    product.dataset.intervalId = moveInterval;
                }, delay * 1000);
            }
            
            // 创建产品动画
            createProductAnimation();
            
            // 处理步骤点击事件
            processSteps.forEach(step => {
                step.addEventListener('click', function() {
                    const stepNumber = this.getAttribute('data-step');
                    const stepName = this.querySelector('.step-name').textContent;
                    
                    // 显示步骤详情
                    const modal = document.getElementById('equipmentModal');
                    document.getElementById('modalEquipmentName').textContent = `${stepName} - 详情`;
                    document.getElementById('modalEquipmentDescription').textContent = `查看${stepName}的实时状态和生产数据。`;
                    document.getElementById('modalEquipmentId').textContent = `PROCESS-STEP-${stepNumber}`;
                    document.getElementById('modalEquipmentLocation').textContent = '生产线';
                    document.getElementById('modalEquipmentStatus').textContent = '运行中';
                    document.getElementById('modalEquipmentInstallDate').textContent = '2023-01-15';
                    document.getElementById('modalEquipmentLastMaintenance').textContent = '2023-12-01';
                    
                    modal.classList.add('active');
                });
            });
            
            // 生产速度控制
            document.getElementById('processSpeed').addEventListener('change', function() {
                const speed = this.value;
                const products = document.querySelectorAll('.product-item');
                
                products.forEach(product => {
                    if (product.dataset.intervalId) {
                        clearInterval(parseInt(product.dataset.intervalId));
                    }
                    
                    let intervalSpeed;
                    switch(speed) {
                        case 'fast':
                            intervalSpeed = 30; // 更快
                            break;
                        case 'slow':
                            intervalSpeed = 100; // 更慢
                            break;
                        default:
                            intervalSpeed = 50; // 正常
                    }
                    
                    let position = parseInt(product.style.left) || -40;
                    const conveyorWidth = conveyor.offsetWidth;
                    
                    const moveInterval = setInterval(() => {
                        position += 1;
                        
                        if (position > conveyorWidth) {
                            position = -40; // 重置到起点
                        }
                        
                        product.style.left = `${position}px`;
                    }, intervalSpeed);
                    
                    product.dataset.intervalId = moveInterval;
                });
            });
            
            // 模拟随机步骤状态变化
            setInterval(() => {
                const randomStep = Math.floor(Math.random() * processSteps.length);
                const step = processSteps[randomStep];
                const stepIcon = step.querySelector('.step-icon');
                const stepStatus = step.querySelector('.step-status');
                
                // 随机改变状态
                const statuses = ['running', 'stopped', 'warning'];
                const randomStatus = statuses[Math.floor(Math.random() * statuses.length)];
                
                // 更新图标
                stepIcon.classList.remove('running', 'stopped', 'warning');
                
                // 更新状态显示
                stepStatus.classList.remove('running', 'stopped', 'warning');
                stepStatus.classList.add(randomStatus);
                
                if (randomStatus === 'running') {
                    stepIcon.classList.add('running');
                    stepIcon.style.animation = 'pulse 1.5s infinite';
                    stepStatus.innerHTML = '<i class="fas fa-play-circle"></i><span>运行中</span>';
                } else if (randomStatus === 'stopped') {
                    stepIcon.style.animation = 'none';
                    stepStatus.innerHTML = '<i class="fas fa-stop-circle"></i><span>已停止</span>';
                } else {
                    stepIcon.classList.add('running');
                    stepIcon.style.animation = 'blink 1s infinite';
                    stepStatus.innerHTML = '<i class="fas fa-exclamation-circle"></i><span>警告</span>';
                }
            }, 10000); // 每10秒随机改变一个步骤状态
        }
        
        // 初始化温度图表
        function initTempChart() {
            const ctx = document.getElementById('tempChart').getContext('2d');
            
            // 生成过去24小时的时间标签
            const labels = [];
            const now = new Date();
            for (let i = 23; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60 * 60 * 1000);
                labels.push(time.getHours().toString().padStart(2, '0') + ':00');
            }
            
            // 生成温度数据
            const tempData = [];
            let baseTemp = 22;
            for (let i = 0; i < 24; i++) {
                // 模拟温度变化
                const variation = Math.sin(i * Math.PI / 12) * 3 + (Math.random() - 0.5) * 0.5;
                tempData.push(baseTemp + variation);
            }
            
            const tempChart = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '温度 (°C)',
                            data: tempData,
                            borderColor: 'rgba(231, 76, 60, 0.8)',
                            backgroundColor: 'rgba(231, 76, 60, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#a0a8c3'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: '#a0a8c3'
                            }
                        },
                        y: {
                            beginAtZero: false,
                            min: 18,
                            max: 30,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: '#a0a8c3',
                                callback: function(value) {
                                    return value + '°C';
                                }
                            }
                        }
                    }
                }
            });
            
            // 时间范围切换
            document.getElementById('chartTimeRange').addEventListener('change', function() {
                const range = this.value;
                let newLabels = [];
                let newData = [];
                
                if (range === '7d') {
                    // 过去7天
                    for (let i = 6; i >= 0; i--) {
                        const date = new Date(now.getTime() - i * 24 * 60 * 60 * 1000);
                        newLabels.push(date.getDate() + '日');
                        newData.push(22 + Math.sin(i) * 2 + Math.random() * 1.5);
                    }
                } else if (range === '30d') {
                    // 过去30天 (每周取一个点)
                    for (let i = 4; i >= 0; i--) {
                        const date = new Date(now.getTime() - i * 7 * 24 * 60 * 60 * 1000);
                        newLabels.push('第' + (5-i) + '周');
                        newData.push(22 + Math.sin(i) * 3 + Math.random() * 2);
                    }
                } else {
                    // 24小时
                    newLabels = labels;
                    newData = tempData;
                }
                
                tempChart.data.labels = newLabels;
                tempChart.data.datasets[0].data = newData;
                tempChart.update();
            });
        }
        
        // 初始化噪声图表
        function initNoiseChart() {
            const ctx = document.getElementById('noiseChart').getContext('2d');
            
            // 生成过去24小时的时间标签
            const labels = [];
            const now = new Date();
            for (let i = 23; i >= 0; i--) {
                const time = new Date(now.getTime() - i * 60 * 60 * 1000);
                labels.push(time.getHours().toString().padStart(2, '0') + ':00');
            }
            
            // 生成噪声数据
            const noiseData = [];
            let baseNoise = 65;
            for (let i = 0; i < 24; i++) {
                // 模拟噪声变化 (工作时间噪声较高)
                const hour = (now.getHours() - i + 24) % 24;
                const isWorkHour = hour >= 8 && hour <= 18;
                const variation = isWorkHour ? 
                    Math.sin(i * Math.PI / 12) * 5 + (Math.random() - 0.5) * 2 :
                    Math.sin(i * Math.PI / 12) * 2 + (Math.random() - 0.5) * 1;
                noiseData.push(baseNoise + variation);
            }
            
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: labels,
                    datasets: [
                        {
                            label: '噪声 (dB)',
                            data: noiseData,
                            borderColor: 'rgba(155, 89, 182, 0.8)',
                            backgroundColor: 'rgba(155, 89, 182, 0.1)',
                            borderWidth: 2,
                            fill: true,
                            tension: 0.4
                        },
                        {
                            label: '安全阈值',
                            data: Array(24).fill(70),
                            borderColor: 'rgba(231, 76, 60, 0.5)',
                            backgroundColor: 'transparent',
                            borderWidth: 1,
                            borderDash: [5, 5],
                            fill: false,
                            pointRadius: 0
                        }
                    ]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            labels: {
                                color: '#a0a8c3'
                            }
                        }
                    },
                    scales: {
                        x: {
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: '#a0a8c3'
                            }
                        },
                        y: {
                            beginAtZero: false,
                            min: 50,
                            max: 80,
                            grid: {
                                color: 'rgba(255, 255, 255, 0.05)'
                            },
                            ticks: {
                                color: '#a0a8c3',
                                callback: function(value) {
                                    return value + 'dB';
                                }
                            }
                        }
                    }
                }
            });
        }
        
        // 模拟实时数据更新
        function updateEnvironmentData() {
            // 更新温度
            const tempElement = document.querySelector('.metric-card[data-metric="temperature"] .metric-value');
            const currentTemp = parseFloat(tempElement.textContent);
            const newTemp = currentTemp + (Math.random() - 0.5) * 0.2;
            tempElement.innerHTML = newTemp.toFixed(1) + '<span class="metric-unit">°C</span>';
            
            // 更新湿度
            const humidityElement = document.querySelector('.metric-card[data-metric="humidity"] .metric-value');
            const currentHumidity = parseFloat(humidityElement.textContent);
            const newHumidity = Math.max(30, Math.min(70, currentHumidity + (Math.random() - 0.5) * 0.5));
            humidityElement.innerHTML = newHumidity.toFixed(1) + '<span class="metric-unit">%RH</span>';
            
            // 更新噪声
            const noiseElement = document.querySelector('.metric-card[data-metric="noise"] .metric-value');
            const currentNoise = parseFloat(noiseElement.textContent);
            const hour = new Date().getHours();
            const isWorkHour = hour >= 8 && hour <= 18;
            const noiseBase = isWorkHour ? 65 : 55;
            const newNoise = Math.max(50, Math.min(80, noiseBase + (Math.random() - 0.5) * 3));
            noiseElement.innerHTML = newNoise.toFixed(1) + '<span class="metric-unit">dB</span>';
            
            // 更新噪声状态
            const noiseStatus = document.querySelector('.metric-card[data-metric="noise"] .status-dot-small');
            if (newNoise > 70) {
                noiseStatus.className = 'status-dot-small status-alarm';
                noiseStatus.nextElementSibling.textContent = '报警';
            } else if (newNoise > 65) {
                noiseStatus.className = 'status-dot-small status-warning';
                noiseStatus.nextElementSibling.textContent = '偏高';
            } else {
                noiseStatus.className = 'status-dot-small status-normal';
                noiseStatus.nextElementSibling.textContent = '正常';
            }
            
            // 更新震动
            const vibrationElement = document.querySelector('.metric-card[data-metric="vibration"] .metric-value');
            const currentVibration = parseFloat(vibrationElement.textContent);
            const newVibration = Math.max(0.05, Math.min(0.3, currentVibration + (Math.random() - 0.5) * 0.02));
            vibrationElement.innerHTML = newVibration.toFixed(2) + '<span class="metric-unit">mm/s</span>';
            
            // 更新电能
            const energyElement = document.querySelector('.metric-card[data-metric="energy"] .metric-value');
            const currentEnergy = parseFloat(energyElement.textContent);
            const newEnergy = Math.max(100, Math.min(150, currentEnergy + (Math.random() - 0.5) * 2));
            energyElement.innerHTML = newEnergy.toFixed(1) + '<span class="metric-unit">kW</span>';
            
            // 随机更新设备状态
            const statusDots = document.querySelectorAll('.device-card .info-value:last-child');
            statusDots.forEach(dot => {
                const random = Math.random();
                if (random < 0.01) { // 1%几率故障
                    dot.textContent = '故障';
                    dot.style.color = 'var(--danger-color)';
                } else if (random < 0.05) { // 4%几率警告
                    dot.textContent = '警告';
                    dot.style.color = 'var(--warning-color)';
                } else if (random < 0.1) { // 5%几率待机
                    dot.textContent = '待机';
                    dot.style.color = 'var(--text-muted)';
                } else { // 90%几率正常
                    dot.textContent = '正常';
                    dot.style.color = 'var(--success-color)';
                }
            });
            
            // 随机生成新警报
            const alertTypes = [
                {icon: 'warning', title: '温度异常', desc: '装配区B温度超过设定阈值25°C'},
                {icon: 'warning', title: '噪声超标', desc: '测试区噪声水平超过安全阈值70dB'},
                {icon: 'info', title: '湿度提醒', desc: '仓储区湿度接近上限60%RH'},
                {icon: 'info', title: '电能消耗提醒', desc: '当前电能消耗接近峰值，建议优化设备运行'}
            ];
            
            if (Math.random() < 0.05) { // 5%几率生成新警报
                const alertType = alertTypes[Math.floor(Math.random() * alertTypes.length)];
                const alertsList = document.getElementById('alertsList');
                const newAlert = document.createElement('div');
                newAlert.className = 'alert-item';
                newAlert.innerHTML = `
                    <div class="alert-icon ${alertType.icon}">
                        <i class="fas fa-${alertType.icon === 'warning' ? 'exclamation-triangle' : 'info-circle'}"></i>
                    </div>
                    <div class="alert-content">
                        <h4>${alertType.title}</h4>
                        <p>${alertType.desc}</p>
                    </div>
                    <div class="alert-time">刚刚</div>
                `;
                
                // 插入到最前面
                alertsList.insertBefore(newAlert, alertsList.firstChild);
                
                // 更新通知徽章
                const badge = document.getElementById('alertCount');
                badge.textContent = parseInt(badge.textContent) + 1;
            }
        }
        
        // 设置设备事件
        function setupDeviceEvents() {
            // 设备控制按钮
            const controlButtons = document.querySelectorAll('.device-control-btn');
            controlButtons.forEach(btn => {
                btn.addEventListener('click', function(e) {
                    e.stopPropagation();
                    const deviceCard = this.closest('.device-card');
                    const deviceName = deviceCard.querySelector('.device-title span').textContent;
                    const action = this.getAttribute('title');
                    
                    if (action === '测试') {
                        // 测试扬声器
                        alert(`正在测试 ${deviceName}...\n测试音播放中...`);
                    } else if (action === '重启') {
                        // 重启PLC
                        if (confirm(`确定要重启 ${deviceName} 吗？`)) {
                            alert(`${deviceName} 正在重启...`);
                        }
                    } else {
                        alert(`${action} ${deviceName} 功能正在开发中...`);
                    }
                });
            });
            
            // 设备卡片点击事件
            const deviceCards = document.querySelectorAll('.device-card');
            deviceCards.forEach(card => {
                card.addEventListener('click', function() {
                    const deviceName = this.querySelector('.device-title span').textContent;
                    const modal = document.getElementById('equipmentModal');
                    
                    document.getElementById('modalEquipmentName').textContent = deviceName + '详情';
                    document.getElementById('modalEquipmentDescription').textContent = `查看${deviceName}的详细信息和运行状态。`;
                    
                    // 模拟设备信息
                    const deviceId = this.querySelector('.device-info:nth-child(1) .info-value').textContent;
                    const location = this.querySelector('.device-info:nth-child(2) .info-value').textContent;
                    const status = this.querySelector('.device-info:last-child .info-value').textContent;
                    
                    document.getElementById('modalEquipmentId').textContent = deviceId;
                    document.getElementById('modalEquipmentLocation').textContent = location;
                    document.getElementById('modalEquipmentStatus').textContent = status;
                    document.getElementById('modalEquipmentInstallDate').textContent = '2023-08-15';
                    document.getElementById('modalEquipmentLastMaintenance').textContent = '2023-11-10';
                    
                    modal.classList.add('active');
                });
            });
            
            // 指标卡片点击事件
            const metricCards = document.querySelectorAll('.metric-card');
            metricCards.forEach(card => {
                card.addEventListener('click', function() {
                    const metric = this.getAttribute('data-metric');
                    const metricNameMap = {
                        'temperature': '温度',
                        'humidity': '湿度',
                        'noise': '噪声',
                        'vibration': '震动',
                        'energy': '电能消耗',
                        'plc': 'PLC状态'
                    };
                    
                    const modal = document.getElementById('equipmentModal');
                    document.getElementById('modalEquipmentName').textContent = metricNameMap[metric] + '详情';
                    document.getElementById('modalEquipmentDescription').textContent = `当前${metricNameMap[metric]}监测详情，包括实时数据、历史趋势和预警信息。`;
                    document.getElementById('modalEquipmentId').textContent = `${metric.toUpperCase()}-METRIC`;
                    document.getElementById('modalEquipmentLocation').textContent = '车间整体';
                    document.getElementById('modalEquipmentStatus').textContent = '监控中';
                    document.getElementById('modalEquipmentInstallDate').textContent = '2023-01-15';
                    document.getElementById('modalEquipmentLastMaintenance').textContent = '2023-12-01';
                    
                    modal.classList.add('active');
                });
            });
        }
        
        // 设置按钮事件
        function setupButtonEvents() {
            // 刷新数据按钮
            document.getElementById('refreshData').addEventListener('click', function() {
                // 更新所有指标
                updateEnvironmentData();
                
                // 显示刷新提示
                const originalText = this.innerHTML;
                this.innerHTML = '<i class="fas fa-check"></i><span>已刷新</span>';
                this.style.backgroundColor = 'var(--success-color)';
                
                setTimeout(() => {
                    this.innerHTML = originalText;
                    this.style.backgroundColor = '';
                }, 1500);
            });
            
            // 导出报告按钮
            document.getElementById('exportReport').addEventListener('click', function() {
                alert('环境监控报告正在生成中...\n报告将包含当前环境数据、趋势分析和设备状态。');
            });
            
            // 清除警报按钮
            document.getElementById('clearAlerts').addEventListener('click', function() {
                const alertsList = document.getElementById('alertsList');
                const readAlerts = alertsList.querySelectorAll('.alert-item');
                
                // 只保留前两个警报（模拟清除已读）
                if (readAlerts.length > 2) {
                    for (let i = 2; i < readAlerts.length; i++) {
                        alertsList.removeChild(readAlerts[i]);
                    }
                    
                    // 更新通知徽章
                    const badge = document.getElementById('alertCount');
                    badge.textContent = Math.max(0, parseInt(badge.textContent) - (readAlerts.length - 2));
                    
                    // 显示清除提示
                    const originalText = this.innerHTML;
                    this.innerHTML = '<i class="fas fa-check"></i><span>已清除</span>';
                    this.style.backgroundColor = 'var(--success-color)';
                    
                    setTimeout(() => {
                        this.innerHTML = originalText;
                        this.style.backgroundColor = '';
                    }, 1500);
                }
            });
            
            // 通知按钮
            document.getElementById('notificationBtn').addEventListener('click', function() {
                // 切换到警报页面
                document.querySelector('.nav-item[data-page="alerts"]').click();
            });
            
            // 用户资料按钮
            document.getElementById('userProfileBtn').addEventListener('click', function() {
                alert('用户资料功能正在开发中...');
            });
            
            // 关闭模态框
            document.getElementById('closeModal').addEventListener('click', function() {
                document.getElementById('equipmentModal').classList.remove('active');
            });
            
            // 查看历史数据按钮
            document.getElementById('viewHistoryBtn').addEventListener('click', function() {
                const deviceName = document.getElementById('modalEquipmentName').textContent;
                alert(`正在加载 ${deviceName} 的历史数据...`);
            });
            
            // 点击模态框外部关闭
            document.getElementById('equipmentModal').addEventListener('click', function(e) {
                if (e.target === this) {
                    this.classList.remove('active');
                }
            });
        }
    </script>
</body>
</html>